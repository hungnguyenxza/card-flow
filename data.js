let data = [
    {
        "id": 53,
        "name": "1. Tăng trưởng lợi nhuận bền",
        "objective_type": 1,
        "workspace_id": 8,
        "progress": 20,
        "due_in": "2020-12-26 01:01:01",
        "lead": {
            "id": 10,
            "title": "Technology CEO",
            "name": "Nguyễn Văn A",
            "image_url": "assets/media/users/300_11.jpg"
        },
        "aligns": [
            {
                "id": 6,
                "name": "1.1. Nhân sự tăng trưởng ổn định",
                "objective_type": 2,
                "workspace_id": 8,
                "progress": 25,
                "due_in": "2021-11-09 01:01:01",
                "lead": {
                    "id": 10,
                    "title": "Technology CEO",
                    "name": "Nguyên Hoàng Bảo",
                    "image_url": "assets/media/users/300_11.jpg"
                },
                "aligns": [
                    {
                        "id": 7,
                        "name": "1.1.a Quy mô và hiệu quả",
                        "objective_type": 2,
                        "workspace_id": 8,
                        "progress": 80,
                        "due_in": "2020-11-09 01:01:01",
                        "lead": {
                            "id": 10,
                            "title": "Technology CEO",
                            "name": "Nguyên Hoàng Bảo",
                            "image_url": "assets/media/users/300_11.jpg"
                        },
                        "aligns": [
                            {
                                "id": 79,
                                "name": "1.1.a.1 Tăng trưởng thần tốc LN 1 cách bền vừng",
                                "objective_type": 2,
                                "workspace_id": 8,
                                "progress": 12,
                                "due_in": "2020-12-21 00:00:00",
                                "lead": {
                                    "id": 10,
                                    "title": "Technology CEO",
                                    "name": "Nguyên Hoàng Bảo",
                                    "image_url": "assets/media/users/300_11.jpg"
                                },
                                "aligns": []
                            },
                            {
                                "id": 84,
                                "name": "FY 2021",
                                "objective_type": 1,
                                "workspace_id": 8,
                                "progress": 0,
                                "due_in": "2021-04-10 00:00:00",
                                "lead": {
                                    "id": 13,
                                    "title": "COD Sub CEO",
                                    "name": "Hùng",
                                    "image_url": "assets/media/users/300_11.jpg"
                                },
                                "aligns": []
                            },
                            {
                                "id": 86,
                                "name": "34543534",
                                "objective_type": 1,
                                "workspace_id": 8,
                                "progress": 0,
                                "due_in": "2021-01-09 00:00:00",
                                "lead": {
                                    "id": 11,
                                    "title": "CEO Pharma Factory",
                                    "name": "Nhung",
                                    "image_url": "assets/media/users/100_12.jpg"
                                },
                                "aligns": []
                            }
                        ]
                    },
                    {
                        "id": 56,
                        "name": "1.1.b.[COD Sub] Đột phá về quy mô và hiệu quả",
                        "objective_type": 2,
                        "workspace_id": 8,
                        "progress": 12,
                        "due_in": "2020-09-21 01:01:01",
                        "lead": {
                            "id": 10,
                            "title": "Technology CEO",
                            "name": "Nguyên Hoàng Bảo",
                            "image_url": "assets/media/users/300_11.jpg"
                        },
                        "aligns": []
                    },
                    {
                        "id": 85,
                        "name": "aaaaaaaaa",
                        "objective_type": 1,
                        "workspace_id": 8,
                        "progress": 0,
                        "due_in": "2021-01-09 00:00:00",
                        "lead": {
                            "id": 12,
                            "title": "CEO Retail",
                            "name": "Sơn",
                            "image_url": "assets/media/users/300_21.jpg"
                        },
                        "aligns": []
                    },
                    {
                        "id": 87,
                        "name": "aaaaaaaaa",
                        "objective_type": 1,
                        "workspace_id": 8,
                        "progress": 0,
                        "due_in": "2021-01-09 00:00:00",
                        "lead": {
                            "id": 12,
                            "title": "CEO Retail",
                            "name": "Sơn",
                            "image_url": "assets/media/users/300_21.jpg"
                        },
                        "aligns": [{
                            "id": 84,
                            "name": "FY 2021",
                            "objective_type": 1,
                            "workspace_id": 8,
                            "progress": 0,
                            "due_in": "2021-04-10 00:00:00",
                            "lead": {
                                "id": 13,
                                "title": "COD Sub CEO",
                                "name": "Hùng",
                                "image_url": "assets/media/users/300_11.jpg"
                            },
                            "aligns": []
                        },
                        {
                            "id": 86,
                            "name": "34543534",
                            "objective_type": 1,
                            "workspace_id": 8,
                            "progress": 0,
                            "due_in": "2021-01-09 00:00:00",
                            "lead": {
                                "id": 11,
                                "title": "CEO Pharma Factory",
                                "name": "Nhung",
                                "image_url": "assets/media/users/100_12.jpg"
                            },
                            "aligns": []
                        }]
                    },
                ]
            },
            {
                "id": 52,
                "name": "5.Tăng trưởng đột p5.há doanh thu, LN đột phá bền vững GDC năm 2020",
                "objective_type": 2,
                "workspace_id": 8,
                "progress": 42,
                "due_in": "2021-01-01 01:01:01",
                "lead": {
                    "id": 10,
                    "title": "Technology CEO",
                    "name": "Nguyên Hoàng Bảo",
                    "image_url": "assets/media/users/300_11.jpg"
                },
                "aligns": [{
                    "id": 89,
                    "name": "aaaaaaaaa",
                    "objective_type": 1,
                    "workspace_id": 8,
                    "progress": 0,
                    "due_in": "2021-01-09 00:00:00",
                    "lead": {
                        "id": 12,
                        "title": "CEO Retail",
                        "name": "Sơn",
                        "image_url": "assets/media/users/300_21.jpg"
                    },
                    "aligns": []
                },
                {
                    "id": 90,
                    "name": "aaaaaaaaa",
                    "objective_type": 1,
                    "workspace_id": 8,
                    "progress": 0,
                    "due_in": "2021-01-09 00:00:00",
                    "lead": {
                        "id": 12,
                        "title": "CEO Retail",
                        "name": "Sơn",
                        "image_url": "assets/media/users/300_21.jpg"
                    },
                    "aligns": [{
                        "id": 84,
                        "name": "FY 2021",
                        "objective_type": 1,
                        "workspace_id": 8,
                        "progress": 0,
                        "due_in": "2021-04-10 00:00:00",
                        "lead": {
                            "id": 13,
                            "title": "COD Sub CEO",
                            "name": "Hùng",
                            "image_url": "assets/media/users/300_11.jpg"
                        },
                        "aligns": []
                    },
                    {
                        "id": 86,
                        "name": "34543534",
                        "objective_type": 1,
                        "workspace_id": 8,
                        "progress": 0,
                        "due_in": "2021-01-09 00:00:00",
                        "lead": {
                            "id": 11,
                            "title": "CEO Pharma Factory",
                            "name": "Nhung",
                            "image_url": "assets/media/users/100_12.jpg"
                        },
                        "aligns": []
                    }]
                },]
            },
            {
                "id": 54,
                "name": "1.2.Ra mắt kênh bán trực tiếp qua App",
                "objective_type": 2,
                "workspace_id": 8,
                "progress": 0,
                "due_in": "2020-09-21 01:01:01",
                "lead": {
                    "id": 10,
                    "title": "Technology CEO",
                    "name": "Nguyên Hoàng Bảo",
                    "image_url": "assets/media/users/300_11.jpg"
                },
                "aligns": [{
                    "id": 84,
                    "name": "FY 2021",
                    "objective_type": 1,
                    "workspace_id": 8,
                    "progress": 0,
                    "due_in": "2021-04-10 00:00:00",
                    "lead": {
                        "id": 13,
                        "title": "COD Sub CEO",
                        "name": "Hùng",
                        "image_url": "assets/media/users/300_11.jpg"
                    },
                    "aligns": []
                },
                {
                    "id": 86,
                    "name": "34543534",
                    "objective_type": 1,
                    "workspace_id": 8,
                    "progress": 0,
                    "due_in": "2021-01-09 00:00:00",
                    "lead": {
                        "id": 11,
                        "title": "CEO Pharma Factory",
                        "name": "Nhung",
                        "image_url": "assets/media/users/100_12.jpg"
                    },
                    "aligns": []
                }]
            }
        ]
    },
    {
        "id": 57,
        "name": "2.Trở thành nhà phân phối dược phẩm số 3",
        "objective_type": 1,
        "workspace_id": 8,
        "progress": 0,
        "due_in": "2020-09-21 00:25:51",
        "lead": {
            "id": 12,
            "title": "CEO Retail",
            "name": "Nguyễn Văn A=B",
            "image_url": "assets/media/users/300_21.jpg"
        },
        "aligns": [
            {
                "id": 55,
                "name": "2.3 Tăng số lượng KH đến cơ sở trong q4",
                "objective_type": 2,
                "workspace_id": 8,
                "progress": 5,
                "due_in": "2020-09-21 01:01:01",
                "lead": {
                    "id": 11,
                    "title": "CEO Pharma Factory",
                    "name": "Nguyễn Văn C",
                    "image_url": "assets/media/users/100_12.jpg"
                },
                "aligns": [
                    {
                        "id": 91,
                        "name": "aaaaaaaaa",
                        "objective_type": 1,
                        "workspace_id": 8,
                        "progress": 0,
                        "due_in": "2021-01-09 00:00:00",
                        "lead": {
                            "id": 12,
                            "title": "CEO Retail",
                            "name": "Nguyễn Văn D",
                            "image_url": "assets/media/users/300_21.jpg"
                        },
                        "aligns": []
                    },
                    {
                        "id": 92,
                        "name": "aaaaaaaaa",
                        "objective_type": 1,
                        "workspace_id": 8,
                        "progress": 0,
                        "due_in": "2021-01-09 00:00:00",
                        "lead": {
                            "id": 12,
                            "title": "CEO Retail",
                            "name": "Nguyễn Văn E",
                            "image_url": "assets/media/users/300_21.jpg"
                        },
                        "aligns": [{
                            "id": 84,
                            "name": "FY 2021",
                            "objective_type": 1,
                            "workspace_id": 8,
                            "progress": 0,
                            "due_in": "2021-04-10 00:00:00",
                            "lead": {
                                "id": 13,
                                "title": "COD Sub CEO",
                                "name": "Nguyễn Văn F",
                                "image_url": "assets/media/users/300_11.jpg"
                            },
                            "aligns": []
                        },
                        {
                            "id": 86,
                            "name": "34543534",
                            "objective_type": 1,
                            "workspace_id": 8,
                            "progress": 0,
                            "due_in": "2021-01-09 00:00:00",
                            "lead": {
                                "id": 11,
                                "title": "CEO Pharma Factory",
                                "name": "Nguyễn Văn G",
                                "image_url": "assets/media/users/100_12.jpg"
                            },
                            "aligns": []
                        }]
                    },
                ]
            },
            {
                "id": 58,
                "name": "2.1. Tăng trưởng đột phá doanh thu",
                "objective_type": 2,
                "workspace_id": 8,
                "progress": 5,
                "due_in": "2020-09-21 00:25:50",
                "lead": {
                    "id": 16,
                    "title": "GOG-Sale Lead",
                    "name": "Nguyễn Văn H",
                    "image_url": "assets/media/users/300_11.jpg"
                },
                "aligns": [{
                    "id": 91,
                    "name": "aaaaaaaaa",
                    "objective_type": 1,
                    "workspace_id": 8,
                    "progress": 0,
                    "due_in": "2021-01-09 00:00:00",
                    "lead": {
                        "id": 12,
                        "title": "CEO Retail",
                        "name": "Nguyễn Văn I",
                        "image_url": "assets/media/users/300_21.jpg"
                    },
                    "aligns": []
                },
                {
                    "id": 92,
                    "name": "aaaaaaaaa",
                    "objective_type": 1,
                    "workspace_id": 8,
                    "progress": 0,
                    "due_in": "2021-01-09 00:00:00",
                    "lead": {
                        "id": 12,
                        "title": "CEO Retail",
                        "name": "Nguyễn Văn K",
                        "image_url": "assets/media/users/300_21.jpg"
                    },
                    "aligns": [{
                        "id": 84,
                        "name": "FY 2021",
                        "objective_type": 1,
                        "workspace_id": 8,
                        "progress": 0,
                        "due_in": "2021-04-10 00:00:00",
                        "lead": {
                            "id": 13,
                            "title": "COD Sub CEO",
                            "name": "Nguyễn Văn K",
                            "image_url": "assets/media/users/300_11.jpg"
                        },
                        "aligns": []
                    },
                    {
                        "id": 86,
                        "name": "34543534",
                        "objective_type": 1,
                        "workspace_id": 8,
                        "progress": 0,
                        "due_in": "2021-01-09 00:00:00",
                        "lead": {
                            "id": 11,
                            "title": "CEO Pharma Factory",
                            "name": "Nguyễn Văn L",
                            "image_url": "assets/media/users/100_12.jpg"
                        },
                        "aligns": []
                    }]
                },]
            },
            {
                "id": 59,
                "name": "2.2. Tăng trưởng quy mô NS, LN đột phá và bền vững Q4 2020",
                "objective_type": 2,
                "workspace_id": 8,
                "progress": 5,
                "due_in": "2020-09-21 00:25:48",
                "lead": {
                    "id": 14,
                    "title": "GOG Sub CEO",
                    "name": "Nguyễn Văn M",
                    "image_url": "assets/media/users/100_12.jpg"
                },
                "aligns": []
            }
        ]
    },
    {
        "id": 66,
        "name": "3. Make official tool to manage goals in company",
        "objective_type": 1,
        "workspace_id": 8,
        "progress": 0,
        "due_in": "2020-12-31 00:00:00",
        "lead": {
            "id": 12,
            "title": "CEO Retail",
            "name": "Nguyễn Văn N",
            "image_url": "assets/media/users/300_21.jpg"
        },
        "aligns": []
    },
    {
        "id": 67,
        "name": "4. Xác nhận lại yêu cầu của khách hàng",
        "objective_type": 1,
        "workspace_id": 8,
        "progress": 0,
        "due_in": "2020-12-31 00:00:00",
        "lead": {
            "id": 9,
            "title": "Group Chairman",
            "name": "Nguyễn Văn O",
            "image_url": "assets/media/users/100_1.jpg"
        },
        "aligns": []
    },
    {
        "id": 84,
        "name": "FY 2021",
        "objective_type": 1,
        "workspace_id": 8,
        "progress": 0,
        "due_in": "2021-04-10 00:00:00",
        "lead": {
            "id": 13,
            "title": "COD Sub CEO",
            "name": "Hùng",
            "image_url": "assets/media/users/300_11.jpg"
        },
        "aligns": []
    },
    {
        "id": 85,
        "name": "aaaaaaaaa",
        "objective_type": 1,
        "workspace_id": 8,
        "progress": 0,
        "due_in": "2021-01-09 00:00:00",
        "lead": {
            "id": 12,
            "title": "CEO Retail",
            "name": "Nguyễn Văn P",
            "image_url": "assets/media/users/300_21.jpg"
        },
        "aligns": []
    },
    {
        "id": 86,
        "name": "34543534",
        "objective_type": 1,
        "workspace_id": 8,
        "progress": 0,
        "due_in": "2021-01-09 00:00:00",
        "lead": {
            "id": 11,
            "title": "CEO Pharma Factory",
            "name": "Nguyễn Văn Q",
            "image_url": "assets/media/users/100_12.jpg"
        },
        "aligns": [{
            "id": 91,
            "name": "aaaaaaaaa",
            "objective_type": 1,
            "workspace_id": 8,
            "progress": 0,
            "due_in": "2021-01-09 00:00:00",
            "lead": {
                "id": 12,
                "title": "CEO Retail",
                "name": "Nguyễn Văn S",
                "image_url": "assets/media/users/300_21.jpg"
            },
            "aligns": []
        },]
    }
];

let newId = 1;
function markNewIDForDataChart(dataValue, parentCard) {
    for (const card of dataValue) {
        card.cardId = card.id;
        card.id = newId++;
        card.chainIds = card.chainIds || [card.id];
        if(parentCard){
            card.chainIds.push(...parentCard.chainIds);
        }
        //adjustNodeChart(card, adjustNodeChart);
        if (card.aligns.length) {
            markNewIDForDataChart(card.aligns, card);
        }
    }
}
markNewIDForDataChart(data);